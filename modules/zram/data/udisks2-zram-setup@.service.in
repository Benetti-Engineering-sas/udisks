# Initializes UDisks2-managed ZRAM devices
[Unit]
Description=UDisks2 managed ZRAM device %i setup
After=dev-%i.device
Requires=dev-%i.device

[Service]
Type=oneshot
RemainAfterExit=yes
EnvironmentFile=-@zramconfdir@/%i
ExecStart=-/bin/sh -c 'echo $ZRAM_NUM_STR > /sys/class/block/%i/max_comp_streams'
ExecStart=-/bin/sh -c 'echo $ZRAM_DEV_SIZE > /sys/class/block/%i/disksize'
ExecStart=-/bin/sh -c 'if [ "$SWAP" = "y" ]; then mkswap /dev/%i && swapon /dev/%i; fi'
ExecStop=-/bin/sh -c 'echo 1 > /sys/class/block/%i/reset'
